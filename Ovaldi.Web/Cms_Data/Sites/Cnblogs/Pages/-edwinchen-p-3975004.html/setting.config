<?xml version="1.0" encoding="utf-8"?>
<Page xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/Ovaldi.Core.Models">
	<AbsoluteName>-edwinchen-p-3975004.html</AbsoluteName>
	<CustomFields xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" />
	<EnableScript>true</EnableScript>
	<EnableTheming>true</EnableTheming>
	<Html>&lt;!DOCTYPE html&gt;
&lt;html lang="zh-cn"&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;四、Solr数据源配置（JNDI、DIH）及定时重做索引 - @瞪着太阳的乌鸦 - 博客园&lt;/title&gt;
&lt;link type="text/css" rel="stylesheet" href="/preview~Cnblogs/Styles/bundles/blog-common.css"&gt;
&lt;link id="MainCss" type="text/css" rel="stylesheet" href="/preview~Cnblogs/Styles/skins/facebook/bundle-facebook.css"&gt;
&lt;link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/edwinchen/rss"&gt;
&lt;link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/edwinchen/rsd.xml"&gt;
&lt;link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/edwinchen/wlwmanifest.xml"&gt;
&lt;script src="http://common.cnblogs.com/script/jquery.js" type="text/javascript"&gt;&lt;/script&gt;  
&lt;script type="text/javascript"&gt;var currentBlogApp = 'edwinchen', cb_enable_mathjax=false;&lt;/script&gt;
&lt;script src="/preview~Cnblogs/Scripts/bundles/blog-common.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;a name="top"&gt;&lt;/a&gt;

&lt;div id="home"&gt;
&lt;div id="header"&gt;
	&lt;div id="blogTitle"&gt;
		
&lt;!--done--&gt;
&lt;h1&gt;&lt;a id="Header2_HeaderTitle" class="headermaintitle" href="/preview~Cnblogs/edwinchen/"&gt;瞪着太阳的乌鸦&lt;/a&gt;&lt;/h1&gt;
&lt;h2&gt;The man shoud know when to leave the party!&lt;/h2&gt;



		
	&lt;/div&gt;&lt;!--end: blogTitle 博客的标题和副标题 --&gt;
	&lt;div id="navigator"&gt;
		
&lt;!--done--&gt;
			&lt;ul id="navList"&gt;
				&lt;li&gt;&lt;a id="MyLinks1_HomeLink" class="menu" href="/preview~Cnblogs/"&gt;博客园&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a id="MyLinks1_MyHomeLink" class="menu" href="/preview~Cnblogs/edwinchen/"&gt;首页&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a id="MyLinks1_NewPostLink" class="menu" rel="nofollow" href="http://i.cnblogs.com/EditPosts.aspx?opt=1"&gt;新随笔&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a id="MyLinks1_ContactLink" accesskey="9" class="menu" rel="nofollow" href="http://space.cnblogs.com/msg/send/%40%e7%9e%aa%e7%9d%80%e5%a4%aa%e9%98%b3%e7%9a%84%e4%b9%8c%e9%b8%a6"&gt;联系&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a id="MyLinks1_Admin" class="menu" rel="nofollow" href="http://i.cnblogs.com/"&gt;管理&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a id="MyLinks1_Syndication" class="menu" href="/preview~Cnblogs/edwinchen/rss"&gt;订阅&lt;/a&gt;
				&lt;a id="MyLinks1_XMLLink" class="aHeaderXML" href="http://www.cnblogs.com/edwinchen/rss"&gt;&lt;img src="/preview~Cnblogs/Images/images/xml.gif" alt="订阅"&gt;&lt;/a&gt;&lt;/li&gt;
			&lt;/ul&gt;


		&lt;div class="blogStats"&gt;
			
			
&lt;!--done--&gt;
随笔- 5&amp;nbsp;
文章- 0&amp;nbsp;
评论- 8&amp;nbsp;

			
		&lt;/div&gt;&lt;!--end: blogStats --&gt;
	&lt;/div&gt;&lt;!--end: navigator 博客导航栏 --&gt;
&lt;/div&gt;&lt;!--end: header 头部 --&gt;

&lt;div id="main"&gt;
	&lt;div id="mainContent"&gt;
	&lt;div class="forFlow"&gt;
		

&lt;!--done--&gt;
&lt;div id="topics"&gt;
	&lt;div class="post"&gt;
		&lt;h1 class="postTitle"&gt;
			&lt;a id="cb_post_title_url" class="postTitle2" href="/preview~Cnblogs/edwinchen/p/3975004.html"&gt;四、Solr数据源配置（JNDI、DIH）及定时重做索引&lt;/a&gt;
		&lt;/h1&gt;
		&lt;div class="clear"&gt;&lt;/div&gt;
		&lt;div class="postBody"&gt;
			&lt;div id="cnblogs_post_body"&gt;&lt;h1&gt;&lt;span style="font-family: 微软雅黑;"&gt;简介 &lt;/span&gt;&lt;/h1&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;Solr支持很多种创建索引的方式，包括网页，xml以及数据库，因为我这边做的是企业级的搜索，所以用的是数据库建立索引。其实从数据库建立索引，很大程度上取决于原来的数据库设计。 &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;从数据库建立索引，solr官方是提供一个工具的&amp;mdash;Data Import Handler。在下载的solr中可以找到相关的jar包： &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;solr-dataimporthandler-4.9.0.jar &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;solr-dataimporthandler-extras-4.9.0.jar &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;将这两个jar包添加进web-inf/lib中 &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;Solr/example中有example-DIH的项目，用了hsqldb作为数据库演示了DIH的使用。读者有兴趣可以去看下，这里就介绍我的配置方法。 &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;DIH还支持增量索引，即在上次建立索引的基础上，只导入增量的数据。这个需要数据表设计的比较好，能够有字段区分，比如创建日期。这里我并没有使用增量索引。 &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;h1&gt;&lt;span style="font-family: 微软雅黑;"&gt;Jndi配置 &lt;/span&gt;&lt;/h1&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Jndi有两种配置方法，第一种是在tomcat中配置，跟普通的jndi配置并没有什么区别。 &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;另外一种则是在前面博客中说过的$TOMCAT_HOME\conf\Catalina\localhost\solr.xml中配置，因为我是在开发环境中配置，到生产环境时用的是resin所以，我使用第二种方法配置，之后比较容易移植。&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&lt;span style="color: blue;"&gt;&amp;lt;?&lt;/span&gt;xml version="1.0" encoding="UTF-8"&lt;span style="color: blue;"&gt;?&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;Context&lt;/span&gt; &lt;span style="color: red;"&gt;docBase&lt;/span&gt;="D:\Installed Applications\apache-tomcat-8.0.9-windows-x64\apache-tomcat-8.0.9\webapps\solr.war"&lt;/span&gt; &lt;span style="color: red;"&gt;debug&lt;/span&gt;=&lt;span style="color: blue;"&gt;"0"&lt;/span&gt; &lt;span style="color: red;"&gt;crossContext&lt;/span&gt;=&lt;span style="color: blue;"&gt;"true"&lt;/span&gt; &lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;Environment&lt;/span&gt; &lt;span style="color: red;"&gt;name&lt;/span&gt;="solr/home"&lt;/span&gt; &lt;span style="color: red;"&gt;type&lt;/span&gt;=&lt;span style="color: blue;"&gt;"java.lang.String"&lt;/span&gt; &lt;span style="color: red;"&gt;value&lt;/span&gt;=&lt;span style="color: blue;"&gt;"D:\Installed Applications\SolrIndex"&lt;/span&gt; &lt;span style="color: red;"&gt;override&lt;/span&gt;=&lt;span style="color: blue;"&gt;"false"&lt;/span&gt; &lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;Resource&lt;/span&gt; &lt;span style="color: red;"&gt;name&lt;/span&gt;="jdbc/songod"&lt;/span&gt; &lt;span style="color: red;"&gt;auth&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Container"&lt;/span&gt; &lt;span style="color: red;"&gt;type&lt;/span&gt;=&lt;span style="color: blue;"&gt;"javax.sql.DataSource"&lt;/span&gt; &lt;span style="color: red;"&gt;username&lt;/span&gt;=&lt;span style="color: blue;"&gt;"root"&lt;/span&gt; &lt;span style="color: red;"&gt;password&lt;/span&gt;=&lt;span style="color: blue;"&gt;"123456"&lt;/span&gt; &lt;span style="color: red;"&gt;driverClassName&lt;/span&gt;=&lt;span style="color: blue;"&gt;"com.mysql.jdbc.Driver"&lt;/span&gt; &lt;span style="color: red;"&gt;url&lt;/span&gt;=&lt;span style="color: blue;"&gt;"jdbc:mysql://127.0.0.1:3306/songod"&lt;/span&gt; &lt;span style="color: red;"&gt;maxActive&lt;/span&gt;=&lt;span style="color: blue;"&gt;"-1"/&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;Context&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;&lt;span style="font-family: 微软雅黑;"&gt;Solrconfig.xml配置 &lt;/span&gt;&lt;/h1&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;在每个核心中的solrconfig.xml中配置dataimport： &lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;requestHandler&lt;/span&gt; &lt;span style="color: red;"&gt;name&lt;/span&gt;="/dataimport"&lt;/span&gt; &lt;span style="color: red;"&gt;class&lt;/span&gt;=&lt;span style="color: blue;"&gt;"org.apache.solr.handler.dataimport.DataImportHandler"&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;lst&lt;/span&gt; &lt;span style="color: red;"&gt;name&lt;/span&gt;="defaults"&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;str&lt;/span&gt; &lt;span style="color: red;"&gt;name&lt;/span&gt;="config"&amp;gt;&lt;/span&gt;dbconf/Song.xml&lt;span style="color: blue;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;str&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt; &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;lst&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;requestHandler&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;配置文件的路径最好使用相对路径。&lt;br&gt;
		&lt;/span&gt;&lt;/p&gt;
&lt;h1&gt;&lt;span style="font-family: 微软雅黑;"&gt;Db.xml配置
&lt;/span&gt;&lt;/h1&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;在solrconfig.xml中配置好了db.xml所在的路径后，接下来就来配置db.xml。名字可以随便起，不过建议和core name一致。
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;先来看个最简单的配置：
&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;dataConfig&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
					&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;dataSource&lt;/span&gt;
						&lt;span style="color: red;"&gt;name&lt;/span&gt;="songod"&lt;/span&gt;
					&lt;span style="color: red;"&gt;jndiName&lt;/span&gt;=&lt;span style="color: blue;"&gt;"java:comp/env/jdbc/songod"&lt;/span&gt;
					&lt;span style="color: red;"&gt;type&lt;/span&gt;=&lt;span style="color: blue;"&gt;"JdbcDataSource"/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;document&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
						&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;entity&lt;/span&gt;
						&lt;span style="color: red;"&gt;name&lt;/span&gt;="SpaceAudio2"&lt;/span&gt;
					&lt;span style="color: red;"&gt;dataSource&lt;/span&gt;=&lt;span style="color: blue;"&gt;"songod"&lt;/span&gt;
					&lt;span style="color: red;"&gt;query&lt;/span&gt;=&lt;span style="color: blue;"&gt;"select ArtistID,Name from sod_artist where SpaceID='${SpaceAudio.UserID}'"&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="ArtistID"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_ID"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="Name"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_Name"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;
&amp;nbsp;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;entity&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
						&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;entity&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
						&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;document&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
						&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;dataConfig&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
					&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;


&lt;/ol&gt;
&lt;p&gt;
&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #9bbb59; font-family: 微软雅黑; font-size: 10pt;"&gt;&lt;strong&gt;dataSource
&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;所使用的数据源，其中name为可选的，主要在使用多数据源时使用。
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #9bbb59; font-family: 微软雅黑; font-size: 10pt;"&gt;&lt;strong&gt;Document
&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;代表一个文档
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #9bbb59; font-family: 微软雅黑; font-size: 10pt;"&gt;&lt;strong&gt;Entity
&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;即需要从数据库中取出的数据，支持sql语句，支持多表查询。跨库查询后面会介绍
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #9bbb59; font-family: 微软雅黑; font-size: 10pt;"&gt;&lt;strong&gt;Field
&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;即接受到的数据，列名column和索引中的名称（必须和schema.xml）中field定义的名字一样。
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;
&amp;nbsp;&lt;/p&gt;
&lt;h1&gt;&lt;span style="font-family: 微软雅黑;"&gt;Schema.xml配置
&lt;/span&gt;&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;name&lt;/span&gt;="Artist_ID"&lt;/span&gt;
					&lt;span style="color: red;"&gt;type&lt;/span&gt;=&lt;span style="color: blue;"&gt;"int"&lt;/span&gt;
					&lt;span style="color: red;"&gt;indexed&lt;/span&gt;=&lt;span style="color: blue;"&gt;"true"&lt;/span&gt;
					&lt;span style="color: red;"&gt;stored&lt;/span&gt;=&lt;span style="color: blue;"&gt;"true"&lt;/span&gt;
					&lt;span style="color: red;"&gt;multiValued&lt;/span&gt;=&lt;span style="color: blue;"&gt;"false"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;name&lt;/span&gt;="Artist_Name"&lt;/span&gt;
					&lt;span style="color: red;"&gt;type&lt;/span&gt;=&lt;span style="color: blue;"&gt;"text_ik"&lt;/span&gt;
					&lt;span style="color: red;"&gt;indexed&lt;/span&gt;=&lt;span style="color: blue;"&gt;"true"&lt;/span&gt;
					&lt;span style="color: red;"&gt;stored&lt;/span&gt;=&lt;span style="color: blue;"&gt;"true"&lt;/span&gt;
					&lt;span style="color: red;"&gt;multiValued&lt;/span&gt;=&lt;span style="color: blue;"&gt;"false"/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;


&lt;/ol&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;配置相应的field。
&lt;/span&gt;&lt;/p&gt;
&lt;h1&gt;&lt;span style="font-family: 微软雅黑;"&gt;导入和测试
&lt;/span&gt;&lt;/h1&gt;
&lt;p&gt;&lt;img src="http://images.cnitblog.com/blog/644226/201409/161525439569506.png" alt=""&gt;
	&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;如上图所示，点击excute即可将数据库中的数据导入索引库。
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;
&amp;nbsp;&lt;/p&gt;
&lt;h1&gt;&lt;span style="font-family: 微软雅黑;"&gt;多数据源配置
&lt;/span&gt;&lt;/h1&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;多数据源是非常有用的一个配置。比如用户的信息存储在user表中，但是用户的分类存储在category表中，这两个表用userid联系起来，那么用多数据源的配置会非常简单。&lt;span style="background-color: yellow;"&gt;当时我并不知道怎样配置多数据源，结果导致我的SQL非常长，并且如果需要同时用到mysql和oracle时，只能用两个核心来实现（使用多数据源后，可以再一个核心索引库里配置）&lt;/span&gt;。
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;数据源jndi的配置就不说了。
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;主要是DB.xml的配置：
&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;dataConfig&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
					&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;dataSource&lt;/span&gt;
						&lt;span style="color: red;"&gt;name&lt;/span&gt;="songod"&lt;/span&gt;
					&lt;span style="color: red;"&gt;jndiName&lt;/span&gt;=&lt;span style="color: blue;"&gt;"java:comp/env/jdbc/songod"&lt;/span&gt;
					&lt;span style="color: red;"&gt;type&lt;/span&gt;=&lt;span style="color: blue;"&gt;"JdbcDataSource"/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;dataSource&lt;/span&gt;
						&lt;span style="color: red;"&gt;name&lt;/span&gt;="mvbox_space"&lt;/span&gt;
					&lt;span style="color: red;"&gt;jndiName&lt;/span&gt;=&lt;span style="color: blue;"&gt;"java:comp/env/jdbc/mvbox_space"&lt;/span&gt;
					&lt;span style="color: red;"&gt;type&lt;/span&gt;=&lt;span style="color: blue;"&gt;"JdbcDataSource"/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;
&amp;nbsp;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;document&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
						&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;entity&lt;/span&gt;
						&lt;span style="color: red;"&gt;name&lt;/span&gt;="Artist"&lt;/span&gt;
					&lt;span style="color: red;"&gt;query&lt;/span&gt;=&lt;span style="color: blue;"&gt;"SELECT * FROM (SELECT
&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.ArtistID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.`Name`,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.NickName,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.SpaceID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.Piclink1,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.Piclink2,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.PinYinInitial,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.IconNo,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.AuthDes,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.NameQP,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.MusicChannelPic,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.MVNum,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.SongNum,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf3.CategoryID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf4.PicLink AS MobilePic
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;FROM
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;(
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SELECT
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.ArtistID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.`Name`,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.NickName,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.SpaceID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.Piclink1,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.Piclink2,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.PinYinInitial,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.IconNo,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.AuthDes,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.NameQP,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.MusicChannelPic,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.MVNum,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.SongNum,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GROUP_CONCAT(DISTINCT Tf2.CategoryID) CategoryID
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FROM
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SELECT
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.ArtistID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.`Name`,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.NickName,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.SpaceID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.Piclink1,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.Piclink2,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.PinYinInitial,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.IconNo,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.AuthDes,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.NameQP,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.MusicChannelPic,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T2.MVNum,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T2.SongNum
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FROM
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sod_artist T1
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LEFT JOIN (
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SELECT
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Ta.ArtistID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Ta.SongNum,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tb.MVNum
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FROM
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SELECT
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ArtistID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;COUNT(ArtistID) SongNum
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FROM
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sod_song_artist_relation
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GROUP BY
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ArtistID
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;) Ta
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LEFT JOIN (
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SELECT
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T3.ArtistID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;COUNT(T3.ArtistID) MVNum
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FROM
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SELECT
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.SongID,
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.ArtistID
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FROM
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sod_song_artist_relation T1
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LEFT JOIN sod_song_ksc T2 ON T1.SongID = T2.SongID
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;WHERE
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T2.FileMV IS NOT NULL
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;AND T2.FileMV != ''
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ORDER BY
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.ArtistID
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;) T3
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GROUP BY
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T3.ArtistID
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;) Tb ON Ta.ArtistID = Tb.ArtistID
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;) T2 ON T1.ArtistID = T2.ArtistID
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;WHERE
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;T1.State = 1
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;) Tf1
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LEFT JOIN sod_artist_category_relation Tf2 ON Tf1.ArtistID = Tf2.ArtistID
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GROUP BY
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tf1.ArtistID
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;) Tf3
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;LEFT JOIN (
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;SELECT
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;FROM
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mobile_artist_photo
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;WHERE
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;State = 1 AND Type=0
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&lt;span style="color: blue;"&gt;) Tf4 ON Tf3.ArtistID = Tf4.ArtistID)Tf5 WHERE Tf5.CategoryID IS NOT NULL AND Tf5.CategoryID != ''"&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="ArtistID"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_ID"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="Name"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_Name"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="NickName"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_NickName"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="SpaceID"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_SpaceID"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="Piclink1"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_Piclink1"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="Piclink2"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_Piclink2"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="Piclink3"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_Piclink3"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="PinYinInitial"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_PinYinInitial"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="IconNo"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_IconNo"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="AuthDes"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_AuthDes"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="NameQP"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_NameQP"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="MusicChannelPic"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_MusicChannelPic"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="MVNum"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_MVNum"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="SongNum"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_SongNum"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="CategoryID"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_CategoryID"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="MobilePic"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_MobilePic"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;
&amp;nbsp;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;entity&lt;/span&gt;
						&lt;span style="color: red;"&gt;name&lt;/span&gt;="Artist2"&lt;/span&gt;
					&lt;span style="color: red;"&gt;dataSource&lt;/span&gt;=&lt;span style="color: blue;"&gt;"mvbox_space"&lt;/span&gt;
					&lt;span style="color: red;"&gt;query&lt;/span&gt;=&lt;span style="color: blue;"&gt;"select SHOWING from SPACE_USER where USERID=${Artist.SpaceID}"&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;field&lt;/span&gt;
						&lt;span style="color: red;"&gt;column&lt;/span&gt;="SHOWING"&lt;/span&gt;
					&lt;span style="color: red;"&gt;name&lt;/span&gt;=&lt;span style="color: blue;"&gt;"Artist_Showing"&lt;/span&gt;
					&lt;span style="color: blue;"&gt;/&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;entity&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
						&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;entity&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
						&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="color: blue;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;document&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
						&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;dataConfig&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
					&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;


&lt;/ol&gt;
&lt;p&gt;
&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;如上面的配置，其实配置是比较简单的，主要是SQL和数据的组织。可以看到DIH的功能是非常强大的。
&lt;/span&gt;&lt;/p&gt;
&lt;h1&gt;&lt;span style="font-family: 微软雅黑;"&gt;定时重做索引
&lt;/span&gt;&lt;/h1&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;在用solr生成索引时，还有一个需求就是定期重做索引，官方是不支持此功能的，需要使用一个修改过的第三方jar：&lt;a name="OLE_LINK19"&gt;&lt;/a&gt;solr-dataimportscheduler-1.1.jar。&lt;/span&gt;
	&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;下载地址&lt;/span&gt;： &lt;a href="https://code.google.com/p/solr-dataimport-scheduler/"&gt;https://code.google.com/p/solr-dataimport-scheduler/&lt;/a&gt;
	&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style="font-family: 微软雅黑;"&gt;但是这个版本会有一个问题，它是使用post请求访问到solr服务器端，并没有制定content-type，导致出错，需要修改源码。
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;所以附件提供修改后的jar包下载（下载配置后即可使用）：&lt;/span&gt;
	&lt;/p&gt;
&lt;p&gt;
&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;配置：
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #9bbb59; font-family: 微软雅黑; font-size: 10pt;"&gt;&lt;strong&gt;步骤一：
&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;在solr hom&lt;span style="background-color: yellow;"&gt;根目录&lt;/span&gt;中新建conf文件夹
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #9bbb59; font-family: 微软雅黑; font-size: 10pt;"&gt;&lt;strong&gt;步骤二：
&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;将solr-dataimportscheduler-1.1.jar包解压缩取出dataimport.properties复制到上一步建立的conf文件夹中。
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #9bbb59; font-family: 微软雅黑; font-size: 10pt;"&gt;&lt;strong&gt;步骤三：
&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="color: #333333; font-family: 微软雅黑; font-size: 10pt; background-color: white;"&gt;修改tomcat发布的webapps/solr/WEB-INF/web.xml（或者修改solr.war中WEB-INF/web.xml）, 在servlet节点前面增加:
&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;listener&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
					&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;lt;&lt;span style="color: maroon;"&gt;listener&lt;/span&gt;-&lt;span style="color: red;"&gt;class&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;org.apache.solr.handler.dataimport.scheduler.ApplicationListener&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;&lt;span style="color: blue;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;listener&lt;/span&gt;-class&amp;gt;&lt;/span&gt;
				&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="color: blue; font-size: 9pt;"&gt;&amp;lt;/&lt;span style="color: maroon;"&gt;listener&lt;span style="color: blue;"&gt;&amp;gt;&lt;/span&gt;
					&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;


&lt;/ol&gt;
&lt;p&gt;&lt;span style="color: #9bbb59; font-family: 微软雅黑; font-size: 10pt;"&gt;&lt;strong&gt;步骤四：
&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;在中配置相关的信息，都比较简单，读者可以自行看文件中的注释就明白了，特别说下重做索引的URL，如下： 
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;#  重做索引的参数
&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;reBuildIndexParams=/select?qt=/dataimport&amp;amp;command=full-import&amp;amp;clean=true&amp;amp;commit=true
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;div style="background: #f4f4f4;"&gt;&lt;span style="font-size: 9pt;"&gt;#reBuildIndexParams=/dataimport?command=full-import&amp;amp;clean=true&amp;amp;commit=true
&lt;/span&gt;&lt;/div&gt;


&lt;/li&gt;


&lt;/ol&gt;
&lt;p&gt;
&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;两种方式都可以。
&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style="font-family: 微软雅黑;"&gt;加上其他的配置信息，如localhost，port，syncCores等等，其实原理就是根据配置信息生成一个带有重做索引命令的url，然后定期访问该url即可。自己在项目中实现一个定时器也可以实现：）
&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;div id="MySignature"&gt;&lt;/div&gt;
&lt;div class="clear"&gt;&lt;/div&gt;
&lt;div id="blog_post_info_block"&gt;
&lt;div id="BlogPostCategory"&gt;&lt;/div&gt;
&lt;div id="EntryTag"&gt;&lt;/div&gt;
&lt;div id="blog_post_info"&gt;
&lt;/div&gt;
&lt;div class="clear"&gt;&lt;/div&gt;
&lt;div id="post_next_prev"&gt;&lt;/div&gt;
&lt;/div&gt;


		&lt;/div&gt;
		&lt;div class="postDesc"&gt;posted @ &lt;span id="post-date"&gt;2014-09-16 15:52&lt;/span&gt; &lt;a href='/preview~Cnblogs/edwinchen/'&gt;@瞪着太阳的乌鸦&lt;/a&gt; 阅读(&lt;span id="post_view_count"&gt;...&lt;/span&gt;) 评论(&lt;span id="post_comment_count"&gt;...&lt;/span&gt;)  &lt;a href="http://i.cnblogs.com/EditPosts.aspx?postid=3975004" rel="nofollow"&gt;编辑&lt;/a&gt; &lt;a href="#" onclick="AddToWz(3975004);return false;"&gt;收藏&lt;/a&gt;&lt;/div&gt;
	&lt;/div&gt;
	&lt;script type="text/javascript"&gt;var allowComments=true,isLogined=false,cb_blogId=189271,cb_entryId=3975004,cb_blogApp=currentBlogApp,cb_blogUserGuid='a9fcebd9-1ef8-e311-8d02-90b11c0b17d6',cb_entryCreatedDate='2014/9/16 15:52:00';loadViewCount(cb_entryId);&lt;/script&gt;
	
&lt;/div&gt;
&lt;!--end: topics 文章、评论容器--&gt;
&lt;a name="!comments"&gt;&lt;/a&gt;&lt;div id="blog-comments-placeholder"&gt;&lt;/div&gt;&lt;script type="text/javascript"&gt;var commentManager = new blogCommentManager();commentManager.renderComments(0);&lt;/script&gt;
&lt;div id="comment_form" class="commentform"&gt;
&lt;a name="commentform"&gt;&lt;/a&gt;
&lt;div id="divCommentShow"&gt;&lt;/div&gt;
&lt;div id="comment_nav"&gt;&lt;span id="span_refresh_tips"&gt;&lt;/span&gt;&lt;a href="javascript:void(0);" id="lnk_RefreshComments" onclick="return RefreshCommentList();"&gt;刷新评论&lt;/a&gt;&lt;a href="#" onclick="return RefreshPage();"&gt;刷新页面&lt;/a&gt;&lt;a href="#top"&gt;返回顶部&lt;/a&gt;&lt;/div&gt;
&lt;div id="comment_form_container"&gt;&lt;/div&gt;
&lt;div class="ad_text_commentbox" id="ad_text_under_commentbox"&gt;&lt;/div&gt;
&lt;div id="site_nav_under"&gt;&lt;a href="/preview~Cnblogs/" target="_blank" title="开发者的网上家园"&gt;博客园首页&lt;/a&gt;&lt;a href="http://q.cnblogs.com/" target="_blank" title="程序员问答社区"&gt;博问&lt;/a&gt;&lt;a href="http://news.cnblogs.com/" target="_blank" title="IT新闻"&gt;新闻&lt;/a&gt;&lt;a href="http://home.cnblogs.com/ing/" target="_blank"&gt;闪存&lt;/a&gt;&lt;a href="http://job.cnblogs.com/" target="_blank"&gt;程序员招聘&lt;/a&gt;&lt;a href="http://kb.cnblogs.com/" target="_blank"&gt;知识库&lt;/a&gt;&lt;/div&gt;
&lt;div id="opt_under_post"&gt;&lt;/div&gt;
&lt;script type="text/javascript"&gt;
    var enableGoogleAd = canShowAdsense(); var googletag = googletag || {}; googletag.cmd = googletag.cmd || [];
    fixPostBodyFormat();
&lt;/script&gt;
&lt;div id="ad_under_post_holder"&gt;
&lt;script type='text/javascript'&gt;
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    (function () {
        if (enableGoogleAd) {
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        }
    })();
&lt;/script&gt;
&lt;script type='text/javascript'&gt;
    try {
        if (enableGoogleAd) {
            googletag.cmd.push(function () {
                googletag.defineSlot('/1090369/cnblogs_blogpost_C1_sitehome', [300, 250], 'div-gpt-ad-1346480159711-0').addService(googletag.pubads());
                googletag.pubads().enableSingleRequest();
                googletag.enableServices();
            });
        };
    } catch (e) { }
&lt;/script&gt;
&lt;div id="google_ad_c1" class="c_ad_block"&gt;
    &lt;div id='div-gpt-ad-1346480159711-0' style='width:300px; height:250px;'&gt;
    &lt;script type='text/javascript'&gt;
        try {
            if (enableGoogleAd) {
                googletag.cmd.push(function () { googletag.display('div-gpt-ad-1346480159711-0'); });            
            } else {
                $('#div-gpt-ad-1346480159711-0').hide();
            }
    } catch (e) { }
    &lt;/script&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="blog_news_kb"&gt;&lt;/div&gt;
&lt;div id="HistoryToday" class="c_ad_block"&gt;&lt;/div&gt;
&lt;script type="text/javascript"&gt;
$(function () {
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    setTimeout(function () { incrementViewCount(cb_entryId); }, 200);
});
&lt;/script&gt;
&lt;/div&gt;

	&lt;/div&gt;&lt;!--end: forFlow --&gt;
	&lt;/div&gt;&lt;!--end: mainContent 主体内容容器--&gt;

	&lt;div id="sideBar"&gt;
		&lt;div id="sideBarMain"&gt;
		&lt;div id="calendar"&gt;&lt;div id="blog-calendar" style="display:none"&gt;&lt;/div&gt;&lt;script type="text/javascript"&gt;loadBlogDefaultCalendar();&lt;/script&gt;&lt;/div&gt;
			
&lt;!--done--&gt;
&lt;div class="newsItem"&gt;
&lt;h3 class="catListTitle"&gt;公告&lt;/h3&gt;
	&lt;div id="blog-news"&gt;&lt;/div&gt;&lt;script type="text/javascript"&gt;loadBlogNews();&lt;/script&gt;
&lt;/div&gt;
			
			
			&lt;div id="leftcontentcontainer"&gt;
				&lt;div id="blog-sidecolumn"&gt;&lt;/div&gt;&lt;script type="text/javascript"&gt;loadBlogSideColumn();&lt;/script&gt;
			&lt;/div&gt;
			
		&lt;/div&gt;&lt;!--end: sideBarMain --&gt;
	&lt;/div&gt;&lt;!--end: sideBar 侧边栏容器 --&gt;
	&lt;div class="clear"&gt;&lt;/div&gt;
	&lt;/div&gt;&lt;!--end: main --&gt;
	&lt;div class="clear"&gt;&lt;/div&gt;
	&lt;div id="footer"&gt;
		
&lt;!--done--&gt;
Copyright &amp;copy;2014 @瞪着太阳的乌鸦
	&lt;/div&gt;&lt;!--end: footer --&gt;
&lt;/div&gt;&lt;!--end: home 自定义的最大容器 --&gt;
&lt;/body&gt;
&lt;/html&gt;
</Html>
	<HtmlMetas i:nil="true" />
	<HtmlTitle i:nil="true" />
	<IsDefault>false</IsDefault>
	<Layout i:nil="true" />
	<Name>-edwinchen-p-3975004.html</Name>
	<OutputCache i:nil="true" />
	<PageContents xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" i:nil="true" />
	<Plugins xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" />
	<Published>false</Published>
	<RequireHttps>false</RequireHttps>
	<Routes>
		<PageRoute>
			<Defaults xmlns:d4p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" i:nil="true" />
			<Identifier>/edwinchen/p/3975004.html</Identifier>
			<RoutePath i:nil="true" />
		</PageRoute>
	</Routes>
	<Scripts i:nil="true" />
	<Site>
		<AbsoluteName xmlns="Ovaldi.Core.Models">Cnblogs</AbsoluteName>
	</Site>
	<Styles i:nil="true" />
	<UUID>-edwinchen-p-3975004.html</UUID>
</Page>